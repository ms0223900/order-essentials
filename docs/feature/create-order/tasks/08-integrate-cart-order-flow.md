# 任務：整合購物車和訂單流程

## 任務描述
在購物車的結帳流程中整合新的訂單建立邏輯，使用 OrderService 處理訂單建立和庫存扣減。

## 輸入格式
- **現有檔案**: `src/pages/Cart.tsx` 或相關的結帳元件
- **輸入資料**: 購物車內容和顧客資訊表單
- **觸發時機**: 用戶點擊「結帳」或「確認訂單」按鈕

## 輸出格式
- **成功結果**: 訂單建立成功，顯示訂單編號和確認訊息
- **失敗結果**: 顯示錯誤訊息，允許用戶重試
- **UI 更新**: 清空購物車，顯示訂單詳細資訊

## 整合細節
1. **元件更新**:
   - 在結帳表單提交時呼叫 OrderService
   - 處理非同步操作和載入狀態
   - 更新 UI 顯示處理結果

2. **狀態管理**:
   - 使用 CartContext 清空購物車
   - 更新訂單相關的狀態
   - 處理錯誤狀態的顯示

3. **用戶體驗**:
   - 顯示處理中的載入指示器
   - 防止重複提交
   - 提供明確的成功/失敗回饋

4. **錯誤處理**:
   - 根據錯誤類型顯示不同訊息
   - 提供重新嘗試功能
   - 保留表單資料避免重新輸入

## 驗收條件
- [ ] 結帳流程成功整合新訂單建立邏輯
- [ ] 購物車在訂單成功建立後正確清空
- [ ] 錯誤情況正確處理和顯示
- [ ] 用戶體驗流暢無卡頓
- [ ] 防止重複提交的機制正常運作
- [ ] 整合測試通過

## 依賴關係
- **前置依賴**:
  - 07-create-order-service（需要使用的服務）
  - 購物車功能（現有實作）
  - 結帳表單（現有實作）
- **後續依賴**: 09-update-checkout-ui-feedback（增強用戶回饋）
